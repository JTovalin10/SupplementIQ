# =================================================================
# SupplementIQ Environment Variables
# =================================================================
# Copy this file to .env.local and fill in your actual values
# Never commit .env.local to version control!
# =================================================================

# -----------------------------------------------------------------
# Supabase Configuration
# -----------------------------------------------------------------
# Get these from your Supabase project settings:
# https://app.supabase.com/project/_/settings/api
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-supabase-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-supabase-service-role-key

# -----------------------------------------------------------------
# Redis Configuration (for Rate Limiting)
# -----------------------------------------------------------------
# Get these from your Redis provider (Upstash, Redis Cloud, etc.)
REDIS_HOST=your-redis-host.upstash.io
REDIS_PORT=6379
REDIS_USERNAME=default
REDIS_PASSWORD=your-redis-password

# Upstash REST API (for product caching)
UPSTASH_REDIS_REST_URL=https://your-upstash-rest-url.upstash.io
UPSTASH_REDIS_REST_TOKEN=your-upstash-rest-token

# -----------------------------------------------------------------
# User Data Encryption (Defense in Depth)
# -----------------------------------------------------------------
# Master encryption key for application-level data encryption
# This is NOT for passwords (Supabase Auth handles that)
# Used for encrypting sensitive user data in the database
#
# Generate with: openssl rand -hex 32
# Example: a3f7b2c1d4e5f6a7b8c9d0e1f2a3b4c5d6e7f8a9b0c1d2e3f4a5b6c7d8e9f0a1
#
# IMPORTANT:
# - Keep this secret secure (use secrets manager in production)
# - Use different keys for dev/staging/production
# - Never commit this to git
# - Rotate periodically (requires re-encryption of data)
USER_DATA_ENCRYPTION_KEY=generate-this-with-openssl-rand-hex-32

# -----------------------------------------------------------------
# Application Configuration
# -----------------------------------------------------------------
# The URL where your app is deployed
NEXT_PUBLIC_APP_URL=http://localhost:3000

# Node environment
NODE_ENV=development

# -----------------------------------------------------------------
# Optional: Additional Security Features
# -----------------------------------------------------------------
# Session timeout (in seconds)
# SESSION_TIMEOUT=3600

# Maximum session age (in seconds)
# MAX_SESSION_AGE=86400

# Enable audit logging
# ENABLE_AUDIT_LOG=true

# -----------------------------------------------------------------
# Security Notes
# -----------------------------------------------------------------
# 1. Password Security:
#    - Passwords are hashed by Supabase Auth using bcrypt
#    - Each password has a unique salt (auto-generated)
#    - You never need to handle password hashing
#
# 2. Rate Limiting:
#    - Requires Redis to be configured
#    - Protects against brute force attacks
#    - See src/lib/utils/rateLimit.ts for configuration
#
# 3. User Data Encryption:
#    - USER_DATA_ENCRYPTION_KEY is for encrypting sensitive user data
#    - Combined with per-user salts from database
#    - See src/lib/utils/userEncryption.ts for usage
#
# 4. For production:
#    - Use a secrets manager (AWS Secrets Manager, Vault, etc.)
#    - Enable HTTPS only
#    - Set up proper CORS policies
#    - Enable Row Level Security (RLS) in Supabase
#    - Set up monitoring and alerting
# =================================================================
